{
  "test_session_123": {
    "session_id": "test_session_123",
    "messages": [
      {
        "timestamp": "2025-06-02T15:21:51.773186",
        "query": "Bonjour, je m'appelle Alice",
        "response": "Bonjour Alice !  Enchanté de te rencontrer.  Comme je n'ai aucun contexte sur toi ou ta demande, je ne peux pas t'aider plus pour le moment.  Dis-moi ce que je peux faire pour toi ?\n\nNiveau de confiance: 0.00\n",
        "context": {
          "confidence": 0.0,
          "sources_count": 0,
          "response_time": 7.646139621734619,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T15:21:53.816126",
        "query": "Quels sont les prix de TeamSquare ?",
        "response": "Bonjour Alice !  Je suis désolé, mais je n'ai pas accès aux informations de prix pour TeamSquare.  Comme je t'ai dit précédemment, je n'ai pas de contexte sur ta demande et je ne peux pas accéder à des bases de données externes, comme un site web de prix.  Pour connaître les tarifs, je te recommande de visiter le site web officiel de TeamSquare ou de contacter directement leur service commercial.\n\nNiveau de confiance: 0.00\n",
        "context": {
          "confidence": 0.0,
          "sources_count": 0,
          "response_time": 2.0416922569274902,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T15:21:56.363150",
        "query": "Et pour le plan Professional ?",
        "response": "Désolé Alice, je n'ai pas accès aux informations de prix pour TeamSquare, donc je ne peux pas te donner de détails sur le plan Professional.  Je n'ai pas assez d'informations pour répondre à ta question.  Pour obtenir les prix, je te recommande de consulter le site web de TeamSquare ou de contacter directement leur service commercial.\n\nNiveau de confiance: 0.00\n",
        "context": {
          "confidence": 0.0,
          "sources_count": 0,
          "response_time": 2.5460383892059326,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T15:21:58.534465",
        "query": "Je suis Alice, tu te souviens de moi ?",
        "response": "Bonjour Alice !  Oui, je me souviens de notre conversation précédente où tu m'as posé des questions sur les prix de TeamSquare, notamment le plan Professional.  Cependant, comme je l'ai déjà mentionné, je n'ai pas accès à ces informations.  Ma mémoire est limitée à cette interaction et je ne peux pas me souvenir d'autres détails à ton sujet.\n\nNiveau de confiance: 0.00\n",
        "context": {
          "confidence": 0.0,
          "sources_count": 0,
          "response_time": 2.170109510421753,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T15:22:00.410078",
        "query": "Qu'est-ce que TeamSquare ?",
        "response": "Bonjour Alice !  Tu me demandes ce qu'est TeamSquare.  Malheureusement, basé sur nos conversations précédentes, je n'ai pas d'informations précises sur ce que c'est,  à part que tu cherches à connaître ses prix et notamment ceux du plan Professional.  Je n'ai pas accès à ce genre d'informations.  Pour obtenir des détails sur TeamSquare, je te recommande de consulter leur site web ou de contacter directement leur service client.\n\nNiveau de confiance: 0.00\n",
        "context": {
          "confidence": 0.0,
          "sources_count": 0,
          "response_time": 1.874007225036621,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T15:29:16.490316",
        "query": "Bonjour, je m'appelle Alice",
        "response": "Bonjour Alice !  Ravi de te revoir.  Comme notre niveau de confiance est assez bas (-0.06), je dois te rappeler que je n'ai pas de mémoire à long terme de nos conversations précédentes.  Cependant, je peux te fournir des informations sur TeamSquare, si tu as des questions spécifiques.  J'ai accès à des informations sur les prix, les fonctionnalités et le support.  Qu'est-ce qui t'intéresse aujourd'hui ?\n",
        "context": {
          "confidence": -0.061211547851562464,
          "sources_count": 5,
          "response_time": 4.566120147705078,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T15:29:20.572067",
        "query": "Quels sont les prix de TeamSquare ?",
        "response": "Bonjour Alice !  Je me souviens de nos conversations précédentes.  Malheureusement, même avec le contexte supplémentaire sur TeamSquare, je n'ai toujours pas accès à ses prix.  Mes informations sont limitées et je ne peux pas te fournir ce détail.  Je suis désolé pour la gêne occasionnée.  Mon niveau de confiance actuel est de 0.39.  Pour obtenir les prix, je te recommande de visiter le site web de TeamSquare ou de contacter directement leur service commercial.\n",
        "context": {
          "confidence": 0.3911733293533326,
          "sources_count": 5,
          "response_time": 4.0803611278533936,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T15:29:25.253827",
        "query": "Et pour le plan Professional ?",
        "response": "Bonjour Alice !  Notre niveau de confiance est actuellement de 0.18.  Le plan Professional de TeamSquare coûte 79€/mois et permet jusqu'à 50 utilisateurs.  Il inclut les fonctionnalités avancées et l'accès à l'API.  Tu bénéficieras également d'un support prioritaire.  Est-ce que tu souhaites plus d'informations sur une fonctionnalité spécifique du plan Professional ?\n",
        "context": {
          "confidence": 0.1756396770477295,
          "sources_count": 5,
          "response_time": 4.680051326751709,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T15:29:27.097274",
        "query": "Je suis Alice, tu te souviens de moi ?",
        "response": "Bonjour Alice !  Je me souviens de nos conversations précédentes, même si notre niveau de confiance est actuellement assez bas (-0.16).  Je suis ravi de te revoir.  Pourrais-tu me rappeler ce dont tu souhaites discuter concernant TeamSquare aujourd'hui ?  J'ai accès à beaucoup d'informations sur les intégrations, l'onboarding, le support client et les témoignages clients.  N'hésite pas à me poser des questions plus précises.\n",
        "context": {
          "confidence": -0.15564374923706056,
          "sources_count": 5,
          "response_time": 1.8416328430175781,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T15:29:30.393795",
        "query": "Qu'est-ce que TeamSquare ?",
        "response": "Bonjour Alice !  Notre niveau de confiance est actuellement de 0.51.  TeamSquare est une plateforme de collaboration moderne conçue pour des équipes de toutes tailles et de tous secteurs.  On l'utilise pour plein de choses, comme la gestion de projets agiles, la collaboration créative, le suivi client, et la coordination d'équipes distantes, que ce soit en développement logiciel, marketing, design, RH, finance, éducation...  En gros, si votre équipe a besoin de collaborer efficacement, TeamSquare peut vous aider.\n\nOn a une interface intuitive avec un chat intégré pour la communication en temps réel, une gestion visuelle des projets, un partage de fichiers sécurisé, des tableaux de bord et des analyses pour suivre vos progrès, et même une API complète pour des intégrations personnalisées avec plus de 50 outils populaires comme Slack, Microsoft Teams, Google Workspace, et plein d'autres.  On a aussi des applications mobiles pour iOS et Android pour rester connecté où que vous soyez.  L'inscription est facile et rapide, et un support dédié est disponible pour les plans Professional et Enterprise.\n",
        "context": {
          "confidence": 0.5062873411178589,
          "sources_count": 5,
          "response_time": 3.2900397777557373,
          "provider": "gemini"
        }
      }
    ],
    "context": {
      "confidence": 0.5062873411178589,
      "sources_count": 5,
      "response_time": 3.2900397777557373,
      "provider": "gemini"
    },
    "created_at": "2025-06-02T15:21:51.773156",
    "updated_at": "2025-06-02T15:29:30.393838"
  },
  "test_networkx_session": {
    "session_id": "test_networkx_session",
    "messages": [
      {
        "timestamp": "2025-06-02T16:12:02.012322",
        "query": "Bonjour, je m'appelle Bob",
        "response": "Bonjour Bob !  Enchanté de faire votre connaissance.  Je suis un assistant TeamSquare.  Comment puis-je vous aider aujourd'hui ?  Je suis encore en apprentissage, donc mon niveau de confiance dans mes réponses est actuellement de 0.02.  N'hésitez pas à me poser des questions précises sur TeamSquare, par exemple sur nos plans tarifaires, nos intégrations ou nos fonctionnalités de sécurité.  Plus vous me donnez d'informations, plus je pourrai vous aider efficacement.\n",
        "context": {
          "confidence": 0.01834471702575682,
          "sources_count": 5,
          "response_time": 3.318898916244507,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T16:12:03.766980",
        "query": "Quels sont les prix de TeamSquare ?",
        "response": "Bonjour Bob !  Je suis désolé, mais je n'ai pas accès aux informations de prix pour TeamSquare.  Le document que j'ai consulté détaille les fonctionnalités et les intégrations, mais ne mentionne pas les tarifs.  Je peux essayer de vous rediriger vers la page web de TeamSquare où vous pourrez trouver cette information, si vous le souhaitez.  Mon niveau de confiance pour répondre à votre question est de 0.39.\n",
        "context": {
          "confidence": 0.3911733293533326,
          "sources_count": 5,
          "response_time": 1.744603157043457,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T16:12:05.981449",
        "query": "Parle-moi du plan Professional",
        "response": "Salut Bob !  Alors, le plan Professional de TeamSquare, c'est une super option si vous avez besoin de fonctionnalités plus avancées et que votre équipe compte jusqu'à 50 utilisateurs.  Pour 79€/mois, vous bénéficiez d'un accès à l'API, ce qui ouvre un monde de possibilités d'intégration et d'automatisation.  Vous aurez aussi un support prioritaire, donc en cas de problème, vous serez aidé plus rapidement qu'avec le plan Starter.  En résumé, c'est un bon compromis entre fonctionnalités et prix.  N'hésitez pas à me poser d'autres questions si vous voulez plus de détails.  Mon niveau de confiance pour cette réponse est de 0.17 car je me base uniquement sur les informations que vous m'avez fournies.\n",
        "context": {
          "confidence": 0.17136075019836428,
          "sources_count": 5,
          "response_time": 2.203397274017334,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T16:12:08.654017",
        "query": "Quelles intégrations sont disponibles ?",
        "response": "Salut Bob !  TeamSquare s'intègre avec plus de 50 outils populaires, dont beaucoup de ceux que tu utilises probablement déjà.  On parle de Slack, Microsoft Teams, Google Workspace, Trello, Asana, GitHub, GitLab, Jira, Salesforce, HubSpot et Zoom, pour ne citer qu'eux !  Ces intégrations se font soit nativement, soit via notre API.  J'ai une confiance assez élevée (0.16) dans cette information car elle est directement tirée des données que j'ai à disposition.  Si tu veux plus de détails sur une intégration spécifique, n'hésite pas à me le demander !\n",
        "context": {
          "confidence": 0.15592187881469732,
          "sources_count": 5,
          "response_time": 2.648676872253418,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T16:12:10.540851",
        "query": "Tu te souviens de mon nom ?",
        "response": "Salut Bob !  Oui, je me souviens que tu t'appelles Bob.  Mon niveau de confiance pour cette information est assez élevé, même si techniquement, ma mémoire est limitée et mon niveau de confiance est de -0.09.  J'ai accès à l'historique de notre conversation.  Y a-t-il autre chose que je puisse t'aider à faire concernant TeamSquare ?\n",
        "context": {
          "confidence": -0.09179065704345711,
          "sources_count": 5,
          "response_time": 1.8710405826568604,
          "provider": "gemini"
        }
      }
    ],
    "context": {
      "confidence": -0.09179065704345711,
      "sources_count": 5,
      "response_time": 1.8710405826568604,
      "provider": "gemini"
    },
    "created_at": "2025-06-02T16:12:02.012302",
    "updated_at": "2025-06-02T16:12:10.540882"
  },
  "default": {
    "session_id": "default",
    "messages": [
      {
        "timestamp": "2025-06-02T16:44:33.174268",
        "query": "Bonjour, quels sont les prix de TeamSquare ?",
        "response": "Bonjour !  Je suis ravi de vous aider.  Malheureusement, je n'ai pas accès aux informations de prix pour TeamSquare dans les données que j'ai reçues.  Mes informations se concentrent sur les fonctionnalités et les intégrations du logiciel.  Pour connaître les prix, je vous recommande de visiter le site web de TeamSquare ou de contacter directement leur service commercial.  \n\nMon niveau de confiance pour cette réponse est de 0.40 car je n'ai pu répondre directement à votre question sur les prix.\n",
        "context": {
          "confidence": 0.40060256958007817,
          "sources_count": 5,
          "response_time": 3.89849853515625,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T16:45:35.435323",
        "query": "Bonjour, quels sont les prix de TeamSquare ?",
        "response": "Bonjour !  Je suis désolé, mais je n'ai toujours pas accès aux informations de prix pour TeamSquare.  Le contexte que j'ai sur TeamSquare décrit ses fonctionnalités, ses intégrations (avec plus de 50 outils, dont ceux que vous avez mentionnés précédemment) et ses aspects de sécurité, mais il ne contient pas de grille tarifaire.  Pour connaître les prix, je vous recommande de visiter le site web de TeamSquare ou de contacter directement leur service commercial.  Mon niveau de confiance pour cette réponse est de 0.65 car je suis certain de mon incapacité à accéder aux prix, mais je peux vous guider vers les ressources appropriées.\n",
        "context": {
          "confidence": 0.6503766059875489,
          "sources_count": 7,
          "response_time": 3.679255723953247,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T16:46:13.680200",
        "query": "Bonjour, quels sont les prix de TeamSquare ?",
        "response": "Bonjour !  Je comprends que vous souhaitiez connaître les prix de TeamSquare.  Malheureusement, je n'ai toujours pas accès à cette information.  Mes données ne contiennent pas de liste de prix.  Je suis désolé de ne pouvoir vous aider davantage sur ce point.  Pour obtenir les tarifs, je vous recommande de visiter le site web de TeamSquare ou de contacter directement leur service commercial.  Mon niveau de confiance pour cette réponse est de 0.65 car je suis certain de mon incapacité à accéder aux prix, mais je ne peux garantir l'exactitude des suggestions alternatives.\n",
        "context": {
          "confidence": 0.6503766059875489,
          "sources_count": 7,
          "response_time": 3.5139050483703613,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T16:49:24.559256",
        "query": "bonjour",
        "response": "Bonjour !  Comment puis-je vous aider aujourd'hui ?  Je vois que vous vous intéressez à TeamSquare.  Je peux vous donner des informations sur ses fonctionnalités de sécurité, ses intégrations avec plus de 50 outils populaires (comme Slack, Microsoft Teams et bien d'autres), son processus d'intégration simple et rapide, ses applications mobiles, et son support client.  Cependant, je n'ai toujours pas accès aux informations de prix.  Je suis désolé pour cela.  Mon niveau de confiance pour répondre à vos questions sur les aspects autres que le prix est de 0.44.  N'hésitez pas à me poser des questions plus précises sur les points mentionnés ci-dessus.\n",
        "context": {
          "confidence": 0.44146156311035156,
          "sources_count": 7,
          "response_time": 7.472789525985718,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T16:50:06.502553",
        "query": "je m appel mahdi",
        "response": "Bonjour Mehdi !  Ravi de vous rencontrer.  Je vois que vous vous intéressez à TeamSquare.  \n\nD'après les informations que j'ai, TeamSquare propose trois plans tarifaires :\n\n* **Plan Starter:** 29€/mois pour jusqu'à 10 utilisateurs, avec les fonctionnalités de base.\n* **Plan Professional:** 79€/mois pour jusqu'à 50 utilisateurs, avec des fonctionnalités avancées et une API.\n* **Plan Enterprise:** 199€/mois pour un nombre d'utilisateurs illimité, avec toutes les fonctionnalités et un support dédié.\n\nN'hésitez pas à me poser d'autres questions si vous souhaitez plus de détails sur les fonctionnalités de chaque plan.  Je suis là pour vous aider.\n\n(Niveau de confiance : 1.00)\n",
        "context": {
          "confidence": -0.00028268814086906957,
          "sources_count": 5,
          "response_time": 3.33171010017395,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T16:50:28.712170",
        "query": "c est qoui mon prenom ?",
        "response": "Bonjour Mehdi !  D'après nos conversations précédentes, je crois que ton prénom est Mehdi.  Cependant, mon niveau de confiance est très faible (-0.04) car je ne peux accéder à aucune information personnelle qui ne m'a pas été explicitement fournie au cours de notre conversation.\n",
        "context": {
          "confidence": -0.03593608856201165,
          "sources_count": 5,
          "response_time": 2.5380475521087646,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-02T18:02:19.180894",
        "query": "bonjour",
        "response": "Salut Mehdi ! Comment puis-je t'aider aujourd'hui ?\n",
        "context": {
          "type": "business_query",
          "confidence": 0.44146156311035156,
          "sources_count": 7,
          "response_time": 2.7650704383850098,
          "provider": "gemini",
          "prompt_type": "greeting",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      },
      {
        "timestamp": "2025-06-02T18:02:44.707246",
        "query": "je veu svoir qui fait teamsquare",
        "response": "Voici quelques exemples de réponses pour différentes requêtes \"{query}\" en suivant les instructions initiales :\n\n**Exemple 1 : {query} =  Quelles sont les fonctionnalités du plan Starter ?**\n\nAI: Salut Mehdi ! Le plan Starter à 29€/mois pour jusqu'à 10 utilisateurs inclut les fonctionnalités de base de TeamSquare.  Cela comprend généralement la gestion des tâches, la communication interne, le partage de fichiers et l'accès aux applications mobiles.  Pour une liste complète et précise des fonctionnalités, je te recommande de consulter le site web de TeamSquare.\n\n\n**Exemple 2 : {query} =  Y a-t-il une version gratuite ?**\n\nAI: Salut Mehdi !  D'après mes informations, TeamSquare ne propose pas de version gratuite.  Les trois plans tarifaires sont payants, commençant à 29€/mois pour le plan Starter.  Je te conseille de vérifier directement sur leur site web pour t'assurer qu'il n'y a pas d'offre promotionnelle ou d'essai gratuit disponible.\n\n\n**Exemple 3 : {query} =  TeamSquare est-il compatible avec Google Workspace ?**\n\nAI: Salut Mehdi ! TeamSquare s'intègre avec plus de 50 outils populaires.  Pour savoir si Google Workspace fait partie de ces intégrations, le mieux est de consulter la liste des intégrations sur le site web de TeamSquare ou de contacter leur support client.\n\n\n**Exemple 4 : {query} =  Combien coûte le plan Enterprise ?**\n\nAI: Salut Mehdi ! Le plan Enterprise de TeamSquare coûte 199€/mois et offre un nombre d'utilisateurs illimité ainsi que toutes les fonctionnalités et un support dédié.  N'oublie pas que ces informations sont basées sur mes données actuelles et il est toujours préférable de vérifier les prix directement sur le site web de TeamSquare.\n\n\n**Exemple 5 : {query} =  Pouvez-vous me donner plus d'informations sur le support client ?**\n\nAI: Salut Mehdi !  Je n'ai pas accès à des détails précis sur le support client de TeamSquare (horaires, canaux de contact, etc.).  Pour obtenir ces informations, je te suggère de visiter leur site web ou de les contacter directement.\n\n\n**Exemple 6 : {query} =  Bonjour**\n\nAI: Salut Mehdi !  Que puis-je faire pour toi",
        "context": {
          "type": "business_query",
          "confidence": 0.4298413801193237,
          "sources_count": 5,
          "response_time": 4.687872648239136,
          "provider": "gemini",
          "prompt_type": "base",
          "scope_analysis": {
            "scope": "business",
            "confidence": 0.7,
            "business_score": 1,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      },
      {
        "timestamp": "2025-06-02T18:03:05.375813",
        "query": "quelle meteo ?",
        "response": "AI: Salut Mehdi !  Je ne sais pas qui fait TeamSquare.  Mes informations sont limitées.  Pour connaître le développeur ou l'entreprise derrière TeamSquare, je te recommande de consulter leur site web officiel.  Tu devrais y trouver des informations \"à propos\" ou \"contact\".\n",
        "context": {
          "type": "business_query",
          "confidence": 0.04895233154296879,
          "sources_count": 5,
          "response_time": 1.7441298961639404,
          "provider": "gemini",
          "prompt_type": "base",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      },
      {
        "timestamp": "2025-06-02T18:03:41.327627",
        "query": "data d aujourduit ?",
        "response": "AI: Salut Mehdi !  Je ne peux pas répondre à cette question sur la météo.  Je suis un assistant pour TeamSquare, et mes connaissances sont limitées à ce sujet.  Pour connaître la météo, je te suggère d'utiliser une application météo ou un site web spécialisé.\n",
        "context": {
          "type": "business_query",
          "confidence": 0.1756213665008545,
          "sources_count": 5,
          "response_time": 1.7738337516784668,
          "provider": "gemini",
          "prompt_type": "base",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      },
      {
        "timestamp": "2025-06-02T18:06:33.981938",
        "query": "bonjour",
        "response": "Salut Mehdi !  Comment puis-je t'aider aujourd'hui concernant TeamSquare ?\n",
        "context": {
          "type": "business_query",
          "confidence": 0.44146156311035156,
          "sources_count": 7,
          "response_time": 2.8696272373199463,
          "provider": "gemini",
          "prompt_type": "greeting",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      },
      {
        "timestamp": "2025-06-02T18:06:44.650461",
        "query": "bonjour",
        "response": "Voici des exemples de réponses pour différentes requêtes \"{query}\"  en suivant les instructions initiales, en restant bref et amical:\n\n\n**Exemple 1 : {query} =  Quelles sont les fonctionnalités du plan Starter ?**\n\nAI: Salut Mehdi ! Le plan Starter inclut les fonctionnalités de base : gestion des tâches, communication, partage de fichiers et applis mobiles.  Pour le détail, consulte le site TeamSquare.\n\n\n**Exemple 2 : {query} =  Y a-t-il une version gratuite ?**\n\nAI: Salut Mehdi !  Non, il n'y a pas de version gratuite.  Vérifie le site pour les offres promotionnelles.\n\n\n**Exemple 3 : {query} =  TeamSquare est-il compatible avec Google Workspace ?**\n\nAI: Salut Mehdi !  Regarde la liste des intégrations sur le site TeamSquare pour voir si Google Workspace est compatible.\n\n\n**Exemple 4 : {query} =  Combien coûte le plan Enterprise ?**\n\nAI: Salut Mehdi ! Le prix du plan Enterprise est de 199€/mois (à vérifier sur le site).\n\n\n**Exemple 5 : {query} =  Pouvez-vous me donner plus d'informations sur le support client ?**\n\nAI: Salut Mehdi !  Pour le support client, consulte le site TeamSquare ou contacte-les directement.\n\n\n**Exemple 6 : {query} =  Bonjour**\n\nAI: Salut Mehdi !  Besoin d'aide avec TeamSquare ?\n\n\n**Exemple 7 : {query} =  qui a créé teamsquare ?**\n\nAI: Salut Mehdi !  Pour savoir qui a créé TeamSquare, consulte la section \"À propos\" de leur site web.\n\n\n**Exemple 8 : {query} = quelle meteo ?**\n\nAI: Salut Mehdi ! Je suis désolé, je ne peux pas te donner la météo.  Essaie une application météo.\n\n\n**Exemple 9 : {query} = data d aujourduit ?**  (en supposant que cela signifie \"date d'aujourd'hui\")\n\nAI: Salut Mehdi !  Aujourd'hui, nous sommes le [date du jour].\n\n\n**Exemple 10 : {query} =  rien**\n\nAI: Salut Mehdi !  N'hésite pas à me poser tes questions sur TeamSquare.\n",
        "context": {
          "type": "business_query",
          "confidence": 0.44146156311035156,
          "sources_count": 7,
          "response_time": 4.256160259246826,
          "provider": "gemini",
          "prompt_type": "greeting",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      },
      {
        "timestamp": "2025-06-02T18:07:20.670663",
        "query": "hi",
        "response": "Veuillez me fournir la requête \"{query}\" que vous souhaitez que je traite.  Je suis prêt à répondre à vos questions sur TeamSquare !\n",
        "context": {
          "type": "business_query",
          "confidence": 0.3918184459209443,
          "sources_count": 7,
          "response_time": 1.5598642826080322,
          "provider": "gemini",
          "prompt_type": "base",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      },
      {
        "timestamp": "2025-06-02T18:26:44.533346",
        "query": "bonjour",
        "response": "Salut !\n",
        "context": {
          "type": "business_query",
          "confidence": 0.44146156311035156,
          "sources_count": 7,
          "response_time": 2.759106159210205,
          "provider": "gemini",
          "prompt_type": "greeting",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      },
      {
        "timestamp": "2025-06-02T18:26:54.885693",
        "query": "j m appel mahdi",
        "response": "Salut Mehdi !  Ravi de te connaître. Besoin d'aide avec TeamSquare ?\n",
        "context": {
          "type": "business_query",
          "confidence": -0.19116039276123048,
          "sources_count": 5,
          "response_time": 1.562859296798706,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      },
      {
        "timestamp": "2025-06-02T18:27:11.757893",
        "query": "oui expliuqe qui fait  TeamSquare",
        "response": "Salut Mehdi !  TeamSquare est une plateforme de collaboration.  On ne sait pas exactement qui l'a *créé*, mais on sait qu'elle est utilisée par des équipes de toutes tailles et dans plein de secteurs différents.\n",
        "context": {
          "type": "business_query",
          "confidence": 0.47451525688171386,
          "sources_count": 5,
          "response_time": 1.6793804168701172,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "business",
            "confidence": 0.7,
            "business_score": 1,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      },
      {
        "timestamp": "2025-06-02T18:27:40.648579",
        "query": "tu me donner plus des details",
        "response": "Avec plaisir Mehdi !  TeamSquare, c'est une plateforme pour collaborer en équipe.  On a des plans différents (Starter, Professional, Enterprise) avec des prix et des fonctionnalités qui varient (de 29€ à 199€/mois).  Le plus cher inclut tout, même un support 24/7.  On prend aussi très au sérieux la sécurité de tes données.\n",
        "context": {
          "type": "business_query",
          "confidence": 0.05158370971679691,
          "sources_count": 5,
          "response_time": 1.800612211227417,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      },
      {
        "timestamp": "2025-06-02T18:28:03.863778",
        "query": "quell est la data d ajourduit ",
        "response": "Salut Mehdi !  Désolé, je n'ai pas accès à la date d'aujourd'hui.\n",
        "context": {
          "type": "business_query",
          "confidence": 0.16978593826293942,
          "sources_count": 5,
          "response_time": 1.7643778324127197,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      },
      {
        "timestamp": "2025-06-02T18:28:13.116475",
        "query": "meteo ?",
        "response": "Désolé Mehdi, je ne peux pas te donner la météo. Je suis un assistant pour TeamSquare, pas une application météo !\n",
        "context": {
          "type": "business_query",
          "confidence": 0.4234252512454987,
          "sources_count": 7,
          "response_time": 1.4563837051391602,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      },
      {
        "timestamp": "2025-06-02T18:28:32.178231",
        "query": "tu peu appel alegnt qui fait la racher extern",
        "response": "Salut Mehdi !  Je ne comprends pas ta question.  Peux-tu la reformuler ?  Je peux peut-être t'aider si tu me dis plus précisément ce que tu cherches.\n",
        "context": {
          "type": "business_query",
          "confidence": 0.08393338203430174,
          "sources_count": 5,
          "response_time": 1.6116111278533936,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      },
      {
        "timestamp": "2025-06-02T21:02:02.521713",
        "query": "bonjour",
        "response": "Erreur Mistral HTTP 404",
        "context": {
          "type": "business_query",
          "confidence": 0.44146156311035156,
          "sources_count": 7,
          "response_time": 2.551469326019287,
          "provider": "gemini",
          "prompt_type": "greeting",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "bonjour"
          }
        }
      },
      {
        "timestamp": "2025-06-02T21:05:06.292401",
        "query": "hi",
        "response": "Salut !\n",
        "context": {
          "type": "business_query",
          "confidence": 0.3918184459209443,
          "sources_count": 7,
          "response_time": 2.9510066509246826,
          "provider": "gemini",
          "prompt_type": "greeting",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "hi"
          }
        }
      },
      {
        "timestamp": "2025-06-02T21:05:24.824297",
        "query": "c est qoui ton role",
        "response": "Je suis là pour t'aider à utiliser TeamSquare au mieux !  Je peux répondre à tes questions sur ses fonctionnalités, son utilisation et ses avantages.\n",
        "context": {
          "type": "business_query",
          "confidence": 0.015455179214477522,
          "sources_count": 5,
          "response_time": 1.6865413188934326,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "c est qoui ton role"
          }
        }
      },
      {
        "timestamp": "2025-06-02T21:05:39.940751",
        "query": "des info sur teamsquare",
        "response": "TeamSquare est une plateforme de collaboration qui facilite le travail d'équipe grâce à un chat intégré, une gestion de projets visuelle, un partage de fichiers sécurisé et des tableaux de bord performants.  Elle s'intègre avec plein d'outils que tu connais déjà (Slack, Microsoft Teams, etc.) et assure une sécurité de haut niveau avec chiffrement et conformité RGPD.\n",
        "context": {
          "type": "business_query",
          "confidence": 0.4921610689163208,
          "sources_count": 5,
          "response_time": 1.9147582054138184,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "business",
            "confidence": 0.4,
            "business_score": 0.4,
            "external_score": 0.0,
            "query": "des info sur teamsquare"
          }
        }
      },
      {
        "timestamp": "2025-06-02T21:06:06.200278",
        "query": "on est dans quelle mois ?",
        "response": "Désolé, je n'ai pas accès à la date et à l'heure actuelles.\n",
        "context": {
          "type": "business_query",
          "confidence": -0.008532142639160157,
          "sources_count": 5,
          "response_time": 1.687819480895996,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "on est dans quelle mois ?"
          }
        }
      },
      {
        "timestamp": "2025-06-02T21:08:28.121184",
        "query": "meteo ?",
        "response": "Désolé, je ne peux pas te donner la météo. Je n'ai pas accès à ces informations.\n",
        "context": {
          "type": "business_query",
          "confidence": 0.4234252512454987,
          "sources_count": 7,
          "response_time": 1.6277389526367188,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "meteo ?"
          }
        }
      },
      {
        "timestamp": "2025-06-03T00:14:46.234360",
        "query": "bonjour",
        "response": "🤔 Cette question porte sur la date ou l'heure, qui n'est pas liée à TeamSquare.\n\nCette question ne fait pas partie de mon domaine d'expertise TeamSquare, mais je peux faire appel à mon collègue spécialisé dans la recherche externe pour vous aider.\n\n🔍 **Voulez-vous que je lance une recherche externe pour répondre à votre question ?**\n\nRépondez simplement **\"oui\"** ou **\"non\"**.",
        "context": {
          "type": "external_search_offer",
          "scope_analysis": {
            "scope": "external",
            "confidence": 0.8,
            "business_score": 0.0,
            "external_score": 0.8,
            "query": "bonjour"
          },
          "reason": "Cette question porte sur la date ou l'heure, qui n'est pas liée à TeamSquare."
        }
      },
      {
        "timestamp": "2025-06-03T00:15:03.445325",
        "query": "hi",
        "response": "Salut !\n",
        "context": {
          "type": "business_query",
          "confidence": 0.3918184459209443,
          "sources_count": 7,
          "response_time": 2.435664415359497,
          "provider": "gemini",
          "prompt_type": "greeting",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "hi"
          }
        }
      },
      {
        "timestamp": "2025-06-03T00:15:07.952641",
        "query": "cv",
        "response": "Désolé, je ne comprends pas ce que tu veux dire par \"cv\".  Peux-tu être plus précis ?\n",
        "context": {
          "type": "business_query",
          "confidence": -0.005178928375244141,
          "sources_count": 5,
          "response_time": 1.4720518589019775,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "cv"
          }
        }
      },
      {
        "timestamp": "2025-06-03T00:15:20.930129",
        "query": "bonjour",
        "response": "🤔 Cette question porte sur la date ou l'heure, qui n'est pas liée à TeamSquare.\n\nCette question ne fait pas partie de mon domaine d'expertise TeamSquare, mais je peux faire appel à mon collègue spécialisé dans la recherche externe pour vous aider.\n\n🔍 **Voulez-vous que je lance une recherche externe pour répondre à votre question ?**\n\nRépondez simplement **\"oui\"** ou **\"non\"**.",
        "context": {
          "type": "external_search_offer",
          "scope_analysis": {
            "scope": "external",
            "confidence": 0.8,
            "business_score": 0.0,
            "external_score": 0.8,
            "query": "bonjour"
          },
          "reason": "Cette question porte sur la date ou l'heure, qui n'est pas liée à TeamSquare."
        }
      },
      {
        "timestamp": "2025-06-03T00:15:37.404891",
        "query": "bonjour",
        "response": "🔍 **Recherche externe effectuée**\n\nBonjour !  Les résultats de recherche indiquent que \"bonjour\" est un mot courant avec beaucoup d'informations disponibles en ligne.  Pour des informations plus précises, il faudrait préciser votre question.\n\n\n📊 **Sources consultées:** Recherche web simulée\n\n💡 Pour toute question sur TeamSquare, n'hésitez pas à me demander !",
        "context": {
          "type": "external_search",
          "sources": [
            "Recherche web simulée"
          ],
          "success": true
        }
      },
      {
        "timestamp": "2025-06-03T00:24:15.243596",
        "query": "hello",
        "response": "Salut !\n",
        "context": {
          "type": "business_query",
          "confidence": -0.007174777984619141,
          "sources_count": 5,
          "response_time": 2.9454314708709717,
          "provider": "gemini",
          "prompt_type": "greeting",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "hello"
          }
        }
      },
      {
        "timestamp": "2025-06-03T00:24:20.316677",
        "query": "bonjour",
        "response": "🤔 Cette question porte sur la date ou l'heure, qui n'est pas liée à TeamSquare.\n\nCette question ne fait pas partie de mon domaine d'expertise TeamSquare, mais je peux faire appel à mon collègue spécialisé dans la recherche externe pour vous aider.\n\n🔍 **Voulez-vous que je lance une recherche externe pour répondre à votre question ?**\n\nRépondez simplement **\"oui\"** ou **\"non\"**.",
        "context": {
          "type": "external_search_offer",
          "scope_analysis": {
            "scope": "external",
            "confidence": 0.8,
            "business_score": 0.0,
            "external_score": 0.8,
            "query": "bonjour"
          },
          "reason": "Cette question porte sur la date ou l'heure, qui n'est pas liée à TeamSquare."
        }
      },
      {
        "timestamp": "2025-06-03T00:34:34.126417",
        "query": "bonjour",
        "response": "Salut !\n",
        "context": {
          "type": "business_query",
          "confidence": 0.44146156311035156,
          "sources_count": 7,
          "response_time": 3.03716778755188,
          "provider": "gemini",
          "prompt_type": "greeting",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "bonjour"
          }
        }
      },
      {
        "timestamp": "2025-06-03T00:34:41.372446",
        "query": "ca va",
        "response": "Ça va bien, merci ! Et toi ?\n",
        "context": {
          "type": "business_query",
          "confidence": 0.03679950714111326,
          "sources_count": 5,
          "response_time": 1.4175364971160889,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "ca va"
          }
        }
      },
      {
        "timestamp": "2025-06-03T00:34:49.250998",
        "query": "oui cv",
        "response": "Désolé, je ne comprends pas ce que tu veux dire par \"oui cv\".  Peux-tu reformuler ta demande ?\n",
        "context": {
          "type": "business_query",
          "confidence": 0.10394490242004394,
          "sources_count": 5,
          "response_time": 1.5612733364105225,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "oui cv"
          }
        }
      },
      {
        "timestamp": "2025-06-03T00:34:59.944193",
        "query": "oui ca va tranquille",
        "response": "Cool !  Ravi de l'entendre.\n",
        "context": {
          "type": "business_query",
          "confidence": 0.019683675765991195,
          "sources_count": 5,
          "response_time": 1.8361546993255615,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "oui ca va tranquille"
          }
        }
      },
      {
        "timestamp": "2025-06-03T00:35:50.289710",
        "query": "quelle l heure maintenant ?",
        "response": "🤔 Cette question porte sur la date ou l'heure, qui n'est pas liée à TeamSquare.\n\nCette question ne fait pas partie de mon domaine d'expertise TeamSquare, mais je peux faire appel à mon collègue spécialisé dans la recherche externe pour vous aider.\n\n🔍 **Voulez-vous que je lance une recherche externe pour répondre à votre question ?**\n\nRépondez simplement **\"oui\"** ou **\"non\"**.",
        "context": {
          "type": "external_search_offer",
          "scope_analysis": {
            "scope": "external",
            "confidence": 1.0,
            "business_score": 0.0,
            "external_score": 1.0,
            "query": "quelle l heure maintenant ?"
          },
          "reason": "Cette question porte sur la date ou l'heure, qui n'est pas liée à TeamSquare."
        }
      },
      {
        "timestamp": "2025-06-03T00:35:58.169265",
        "query": "quelle l heure maintenant ?",
        "response": "🔍 **Recherche externe effectuée**\n\nDésolé, je ne peux pas te dire l'heure maintenant.  Les résultats de recherche indiquent seulement qu'il y a des informations disponibles en ligne, mais ils ne me fournissent pas l'heure actuelle.  Pour connaître l'heure, consulte une horloge, une montre ou un site web affichant l'heure.\n\n\n📊 **Sources consultées:** Recherche web simulée\n\n💡 Pour toute question sur TeamSquare, n'hésitez pas à me demander !",
        "context": {
          "type": "external_search",
          "sources": [
            "Recherche web simulée"
          ],
          "success": true
        }
      },
      {
        "timestamp": "2025-06-03T01:40:26.832157",
        "query": "bonjour",
        "response": "Bonjour !\n",
        "context": {
          "type": "business_query",
          "confidence": 0.44146156311035156,
          "sources_count": 7,
          "response_time": 4.0329811573028564,
          "provider": "gemini",
          "prompt_type": "greeting",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "bonjour"
          }
        }
      },
      {
        "timestamp": "2025-06-03T01:40:33.693185",
        "query": "ca va",
        "response": "Ça va bien, merci ! Et toi ?\n",
        "context": {
          "type": "business_query",
          "confidence": 0.4229996919631958,
          "sources_count": 7,
          "response_time": 1.6129822731018066,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "ca va"
          }
        }
      },
      {
        "timestamp": "2025-06-03T01:41:30.963104",
        "query": "c est qoui NVIDIA",
        "response": "Désolé, je ne sais pas ce qu'est NVIDIA.  Je suis un assistant pour TeamSquare, et je n'ai pas d'informations sur les entreprises technologiques en dehors de mon domaine d'expertise.\n",
        "context": {
          "type": "business_query",
          "confidence": 0.10800305366516111,
          "sources_count": 5,
          "response_time": 1.6256306171417236,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "c est qoui NVIDIA"
          }
        }
      },
      {
        "timestamp": "2025-06-03T01:44:40.061148",
        "query": "Quelles sont les dernières actualités tech ?",
        "response": "Désolé, je ne suis pas au courant des dernières actualités tech.  Je suis spécialisé dans TeamSquare et ses fonctionnalités.\n",
        "context": {
          "type": "business_query",
          "confidence": 0.1313454723358154,
          "sources_count": 5,
          "response_time": 3.978926420211792,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "Quelles sont les dernières actualités tech ?"
          }
        }
      },
      {
        "timestamp": "2025-06-03T02:03:38.147640",
        "query": "bonjour",
        "response": "Bonjour !\n",
        "context": {
          "type": "business_query",
          "confidence": 0.44146156311035156,
          "sources_count": 7,
          "response_time": 3.5677413940429688,
          "provider": "gemini",
          "prompt_type": "greeting",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "bonjour"
          }
        }
      },
      {
        "timestamp": "2025-06-03T02:03:43.278291",
        "query": "Quelles sont les dernières actualités tech ?",
        "response": "Désolé, je ne suis pas au courant des dernières actualités tech.  Je suis plutôt spécialisé dans TeamSquare et ses fonctionnalités.  Si tu as des questions sur TeamSquare, n'hésite pas !\n",
        "context": {
          "type": "business_query",
          "confidence": 0.48209092020988464,
          "sources_count": 7,
          "response_time": 1.653395652770996,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "Quelles sont les dernières actualités tech ?"
          }
        }
      },
      {
        "timestamp": "2025-06-03T02:11:21.823050",
        "query": "Bonjour",
        "response": "Bonjour !  Comment puis-je vous aider concernant TeamSquare aujourd'hui ?  Je vois que vous vous intéressez aux intégrations, et je peux vous confirmer que TeamSquare s'intègre avec plus de 50 outils populaires,  dont Slack, Microsoft Teams, Google Workspace, et beaucoup d'autres.  N'hésitez pas à me poser des questions plus précises sur les intégrations ou d'autres aspects de TeamSquare.  (Confiance: 0.44)\n",
        "context": {
          "confidence": 0.44146156311035156,
          "sources_count": 7,
          "response_time": 3.64432430267334,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-03T02:11:40.971801",
        "query": "c est qoui NVIDIA ?",
        "response": "Désolé, je ne peux pas te répondre.  Je suis un assistant pour TeamSquare, et ma connaissance se limite aux fonctionnalités et aux informations de TeamSquare.  NVIDIA n'est pas lié à TeamSquare, donc je n'ai aucune information à ce sujet.  Mon niveau de confiance pour répondre à ta question est de 0.08.\n",
        "context": {
          "confidence": 0.07609112739562987,
          "sources_count": 5,
          "response_time": 1.8673410415649414,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-03T03:25:09.896510",
        "query": "bonjout",
        "response": "Bonjour !  Comment puis-je vous aider concernant TeamSquare aujourd'hui ?  Je vois que vous vous intéressez peut-être à nos fonctionnalités ou à nos tarifs.  N'hésitez pas à me poser vos questions.  (Confiance: 0.07)\n",
        "context": {
          "confidence": 0.07367324829101562,
          "sources_count": 5,
          "response_time": 4.171328544616699,
          "provider": "gemini"
        }
      },
      {
        "timestamp": "2025-06-03T03:25:24.785850",
        "query": "donner moi le jour d aujourduit",
        "response": "Désolé, je ne peux pas te donner la date d'aujourd'hui.  Mes connaissances sont limitées à l'information fournie sur TeamSquare : ses fonctionnalités de sécurité, ses intégrations, ses applications mobiles, son processus d'intégration et son support client.  Je n'ai pas accès à l'horloge système ou à des informations en temps réel comme la date.\n\nNiveau de confiance: -0.00\n",
        "context": {
          "confidence": -0.002584524154663015,
          "sources_count": 5,
          "response_time": 2.1724398136138916,
          "provider": "gemini"
        }
      }
    ],
    "context": {
      "confidence": -0.002584524154663015,
      "sources_count": 5,
      "response_time": 2.1724398136138916,
      "provider": "gemini",
      "type": "business_query",
      "prompt_type": "main",
      "scope_analysis": {
        "scope": "unknown",
        "confidence": 0.3,
        "business_score": 0.0,
        "external_score": 0.0,
        "query": "Quelles sont les dernières actualités tech ?"
      },
      "reason": "Cette question porte sur la date ou l'heure, qui n'est pas liée à TeamSquare.",
      "sources": [
        "Recherche web simulée"
      ],
      "success": true
    },
    "created_at": "2025-06-02T16:44:33.174249",
    "updated_at": "2025-06-03T03:25:24.785887"
  },
  "test_langchain_session": {
    "session_id": "test_langchain_session",
    "messages": [
      {
        "timestamp": "2025-06-02T17:22:38.365573",
        "query": "Bonjour, je m'appelle Charlie",
        "response": "Salut !  Comment puis-je t'aider aujourd'hui ?\n",
        "context": {
          "confidence": -0.06034112930297848,
          "sources_count": 5,
          "response_time": 3.6472585201263428,
          "provider": "gemini",
          "prompt_type": "greeting"
        }
      },
      {
        "timestamp": "2025-06-02T17:22:39.790803",
        "query": "Quels sont les prix de TeamSquare ?",
        "response": "Okay.  J'attends votre requête tarifaire.\n",
        "context": {
          "confidence": 0.6444833308458329,
          "sources_count": 7,
          "response_time": 1.4195165634155273,
          "provider": "gemini",
          "prompt_type": "pricing"
        }
      },
      {
        "timestamp": "2025-06-02T17:22:41.214940",
        "query": "Parle-moi du plan Professional",
        "response": "Veuillez fournir la requête tarifaire.  Je ne peux pas répondre sans savoir quel plan ou quelle information tarifaire vous souhaitez.\n",
        "context": {
          "confidence": 0.5071004688739777,
          "sources_count": 7,
          "response_time": 1.4137723445892334,
          "provider": "gemini",
          "prompt_type": "pricing"
        }
      },
      {
        "timestamp": "2025-06-02T17:22:43.632199",
        "query": "Quelles intégrations sont disponibles ?",
        "response": "Okay, je comprends.  Pour obtenir les prix du plan Professional de TeamSquare, j'ai besoin de plus d'informations.  Pouvez-vous me préciser :\n\n* **Le nombre d'utilisateurs ?** Le prix varie en fonction du nombre de personnes utilisant le logiciel.\n* **La durée de l'abonnement ?**  Les prix sont généralement différents pour les abonnements mensuels et annuels.\n* **Des fonctionnalités additionnelles ?**  Avez-vous besoin de modules complémentaires ou d'intégrations spécifiques ?\n\nUne fois que j'aurai ces informations, je pourrai vous donner un prix plus précis.  Vous pouvez aussi consulter directement le site web de TeamSquare pour obtenir une estimation.\n",
        "context": {
          "confidence": 0.49745117425918584,
          "sources_count": 7,
          "response_time": 2.406817674636841,
          "provider": "gemini",
          "prompt_type": "base"
        }
      },
      {
        "timestamp": "2025-06-02T17:22:45.135536",
        "query": "Tu te souviens de mon nom ?",
        "response": "Veuillez fournir la requête tarifaire. Je ne peux pas répondre sans savoir quel plan ou quelle information tarifaire vous souhaitez.\n",
        "context": {
          "confidence": 0.34263083934783933,
          "sources_count": 7,
          "response_time": 1.4703788757324219,
          "provider": "gemini",
          "prompt_type": "identity"
        }
      }
    ],
    "context": {
      "confidence": 0.34263083934783933,
      "sources_count": 7,
      "response_time": 1.4703788757324219,
      "provider": "gemini",
      "prompt_type": "identity"
    },
    "created_at": "2025-06-02T17:22:38.365549",
    "updated_at": "2025-06-02T17:22:45.135569"
  },
  "test_routing_session": {
    "session_id": "test_routing_session",
    "messages": [
      {
        "timestamp": "2025-06-02T17:27:35.731162",
        "query": "Bonjour, je m'appelle David",
        "response": "Salut !  Comment puis-je t'aider aujourd'hui ?\n",
        "context": {
          "type": "business_query",
          "confidence": 0.011101665496826209,
          "sources_count": 5,
          "response_time": 2.171544313430786,
          "provider": "gemini",
          "prompt_type": "greeting",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      },
      {
        "timestamp": "2025-06-02T17:27:37.028321",
        "query": "Quels sont les prix de TeamSquare ?",
        "response": "Okay.  J'attends votre requête tarifaire.\n",
        "context": {
          "type": "business_query",
          "confidence": 0.6444833308458329,
          "sources_count": 7,
          "response_time": 1.2920238971710205,
          "provider": "gemini",
          "prompt_type": "pricing",
          "scope_analysis": {
            "scope": "business",
            "confidence": 0.9,
            "business_score": 2,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "handle_internally"
          }
        }
      },
      {
        "timestamp": "2025-06-02T17:27:37.036563",
        "query": "Quelle est la météo aujourd'hui ?",
        "response": "🤔 Cette question semble porter sur météo qui n'est pas lié à TeamSquare.\n\nCette question ne fait pas partie de mon domaine d'expertise TeamSquare, mais je peux faire appel à mon collègue spécialisé dans la recherche externe pour vous aider.\n\n🔍 **Voulez-vous que je lance une recherche externe pour répondre à votre question ?**\n\nRépondez simplement **\"oui\"** ou **\"non\"**.",
        "context": {
          "type": "external_search_offer",
          "scope_analysis": {
            "scope": "external",
            "confidence": 0.75,
            "business_score": 0,
            "external_score": 1,
            "general_patterns": [
              "quelle est.*"
            ],
            "recommendation": "offer_external_search"
          },
          "reason": "Cette question semble porter sur météo qui n'est pas lié à TeamSquare."
        }
      },
      {
        "timestamp": "2025-06-02T17:27:38.384633",
        "query": "Quelle est la météo aujourd'hui ?",
        "response": "🔍 **Recherche externe effectuée**\n\nIl fait partiellement nuageux aujourd'hui, avec 18°C.  Selon le service météorologique.\n\n\n📊 **Sources consultées:** Recherche web simulée\n\n💡 Pour toute question sur TeamSquare, n'hésitez pas à me demander !",
        "context": {
          "type": "external_search",
          "sources": [
            "Recherche web simulée"
          ],
          "success": true
        }
      },
      {
        "timestamp": "2025-06-02T17:27:42.867254",
        "query": "Comment fonctionne l'API TeamSquare ?",
        "response": "Voici quelques exemples de réponses pour différentes requêtes \"{query}\":\n\n\n**Query 1:  \"Combien coûte l'abonnement le plus basique ?\"**\n\nAI:  Hé bien, ça dépend un peu de ce que tu cherches.  On a plusieurs options.  Pour avoir un prix précis pour l'abonnement le plus basique, pourrais-tu me dire combien d'utilisateurs vous seriez et quelles fonctionnalités vous souhaitez ?  Avec ces informations, je peux te donner un devis plus précis.\n\n\n**Query 2: \"Avez-vous un essai gratuit ?\"**\n\nAI: Oui, on propose un essai gratuit !  Tu peux l'essayer sans engagement pendant [durée de l'essai].  Pour commencer, il te suffit de t'inscrire sur notre site web à [lien du site web].\n\n\n**Query 3: \"Quelles sont les différences entre les abonnements ?\"**\n\nAI:  Nos abonnements diffèrent principalement par le nombre d'utilisateurs, l'espace de stockage et les fonctionnalités avancées.  Par exemple, l'abonnement [nom de l'abonnement] inclut [liste des fonctionnalités], tandis que l'abonnement [nom d'un autre abonnement] ajoute [liste des fonctionnalités supplémentaires].  Je peux te fournir un tableau comparatif si tu le souhaites.\n\n\n**Query 4: \"J'ai besoin d'un devis pour 50 utilisateurs.\"**\n\nAI:  Parfait !  Pour un devis personnalisé pour 50 utilisateurs, pourrais-tu me préciser quelles fonctionnalités vous souhaitez inclure ?  Cela m'aidera à te fournir une offre précise et adaptée à vos besoins.\n\n\n**Query 5: \"Votre logiciel est-il compatible avec Slack ?\"**\n\nAI:  On travaille actuellement à l'intégration avec Slack.  Pour le moment, [réponse précise sur la compatibilité actuelle, par exemple : \"ce n'est pas encore possible\" ou \"nous proposons une intégration partielle via [méthode]\"].\n\n\n**Query 6: \"Quelle est votre politique de remboursement ?\"**\n\nAI:  Notre politique de remboursement est détaillée dans nos conditions générales d'utilisation, disponibles ici : [lien vers les conditions générales].  N'hésite pas à me contacter si tu as des questions spécifiques après avoir lu le document.\n\n\n**Query 7: \"Avez-vous une documentation ?\"**\n\nAI:  Oui, bien sûr !  ",
        "context": {
          "type": "business_query",
          "confidence": 0.49377331733703617,
          "sources_count": 5,
          "response_time": 4.4791035652160645,
          "provider": "gemini",
          "prompt_type": "base",
          "scope_analysis": {
            "scope": "business",
            "confidence": 0.9,
            "business_score": 2,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "handle_internally"
          }
        }
      },
      {
        "timestamp": "2025-06-02T17:27:42.887636",
        "query": "Comment faire une pasta carbonara ?",
        "response": "🤔 Cette question semble être de nature générale et pourrait nécessiter une recherche externe.\n\nCette question ne fait pas partie de mon domaine d'expertise TeamSquare, mais je peux faire appel à mon collègue spécialisé dans la recherche externe pour vous aider.\n\n🔍 **Voulez-vous que je lance une recherche externe pour répondre à votre question ?**\n\nRépondez simplement **\"oui\"** ou **\"non\"**.",
        "context": {
          "type": "external_search_offer",
          "scope_analysis": {
            "scope": "general",
            "confidence": 0.7,
            "business_score": 0,
            "external_score": 0,
            "general_patterns": [
              "comment faire.*"
            ],
            "recommendation": "offer_external_search"
          },
          "reason": "Cette question semble être de nature générale et pourrait nécessiter une recherche externe."
        }
      },
      {
        "timestamp": "2025-06-02T17:27:44.089777",
        "query": "Tu te souviens de mon nom ?",
        "response": "Okay.  J'attends votre requête concernant TeamSquare.\n",
        "context": {
          "type": "business_query",
          "confidence": 0.34263083934783933,
          "sources_count": 7,
          "response_time": 1.192760944366455,
          "provider": "gemini",
          "prompt_type": "identity",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      }
    ],
    "context": {
      "type": "business_query",
      "confidence": 0.34263083934783933,
      "sources_count": 7,
      "response_time": 1.192760944366455,
      "provider": "gemini",
      "prompt_type": "identity",
      "scope_analysis": {
        "scope": "unknown",
        "confidence": 0.3,
        "business_score": 0,
        "external_score": 0,
        "general_patterns": [],
        "recommendation": "clarify_question"
      },
      "reason": "Cette question semble être de nature générale et pourrait nécessiter une recherche externe.",
      "sources": [
        "Recherche web simulée"
      ],
      "success": true
    },
    "created_at": "2025-06-02T17:27:35.731147",
    "updated_at": "2025-06-02T17:27:44.089819"
  },
  "test_fixed_session": {
    "session_id": "test_fixed_session",
    "messages": [
      {
        "timestamp": "2025-06-02T18:20:17.966613",
        "query": "Bonjour !",
        "response": "Salut !\n",
        "context": {
          "type": "business_query",
          "confidence": 0.43355038166046145,
          "sources_count": 7,
          "response_time": 1.9656288623809814,
          "provider": "gemini",
          "prompt_type": "greeting",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      },
      {
        "timestamp": "2025-06-02T18:20:20.007975",
        "query": "Quels sont les prix de TeamSquare ?",
        "response": "Je suis désolé, mais je ne peux pas fournir d'informations de prix spécifiques pour TeamSquare.  Nos prix varient en fonction des besoins spécifiques de chaque équipe et du nombre d'utilisateurs.  Pour obtenir un devis personnalisé, veuillez visiter notre site web [insérer lien vers la page de prix ici] ou contacter notre équipe commerciale à [insérer adresse email ou numéro de téléphone ici].\n",
        "context": {
          "type": "business_query",
          "confidence": 0.6444833308458329,
          "sources_count": 7,
          "response_time": 2.0331783294677734,
          "provider": "gemini",
          "prompt_type": "pricing",
          "scope_analysis": {
            "scope": "business",
            "confidence": 0.9,
            "business_score": 2,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "handle_internally"
          }
        }
      },
      {
        "timestamp": "2025-06-02T18:20:20.024313",
        "query": "Quelle est la météo aujourd'hui ?",
        "response": "🤔 Cette question semble porter sur météo qui n'est pas lié à TeamSquare.\n\nCette question ne fait pas partie de mon domaine d'expertise TeamSquare, mais je peux faire appel à mon collègue spécialisé dans la recherche externe pour vous aider.\n\n🔍 **Voulez-vous que je lance une recherche externe pour répondre à votre question ?**\n\nRépondez simplement **\"oui\"** ou **\"non\"**.",
        "context": {
          "type": "external_search_offer",
          "scope_analysis": {
            "scope": "external",
            "confidence": 0.75,
            "business_score": 0,
            "external_score": 1,
            "general_patterns": [
              "quelle est.*"
            ],
            "recommendation": "offer_external_search"
          },
          "reason": "Cette question semble porter sur météo qui n'est pas lié à TeamSquare."
        }
      },
      {
        "timestamp": "2025-06-02T18:20:22.472864",
        "query": "Comment fonctionne l'API TeamSquare ?",
        "response": "L'API TeamSquare vous permet de connecter TeamSquare à vos autres outils logiciels.  Imaginez ça comme des ponts qui relient TeamSquare à vos applications favorites.\n\nElle fonctionne grâce à des \"endpoints REST\".  Ce sont des points d'accès spécifiques qui vous permettent de contrôler TeamSquare depuis votre propre logiciel.  Vous pouvez par exemple, ajouter de nouveaux utilisateurs, créer des projets, assigner des tâches, ou partager des fichiers, le tout sans avoir à utiliser l'interface web de TeamSquare directement.\n\nNous fournissons une documentation complète avec des exemples de code en Python, JavaScript et PHP pour vous faciliter la tâche.  Vous pouvez ainsi intégrer TeamSquare à vos systèmes existants de manière simple et efficace.  En gros, vous automatisez des actions sur TeamSquare depuis vos outils habituels.\n",
        "context": {
          "type": "business_query",
          "confidence": 0.7086083233356476,
          "sources_count": 7,
          "response_time": 2.442305564880371,
          "provider": "gemini",
          "prompt_type": "features",
          "scope_analysis": {
            "scope": "business",
            "confidence": 0.9,
            "business_score": 2,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "handle_internally"
          }
        }
      },
      {
        "timestamp": "2025-06-02T18:20:24.013592",
        "query": "Tu te souviens de notre conversation ?",
        "response": "Oui, je me souviens !  On a parlé des prix de TeamSquare (que je ne peux pas donner sans plus d'informations), de la météo (hors de mon domaine d'expertise), et du fonctionnement de notre API.\n",
        "context": {
          "type": "business_query",
          "confidence": -0.03743547439575199,
          "sources_count": 5,
          "response_time": 1.4971301555633545,
          "provider": "gemini",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0,
            "external_score": 0,
            "general_patterns": [],
            "recommendation": "clarify_question"
          }
        }
      },
      {
        "timestamp": "2025-06-02T21:00:04.745191",
        "query": "Bonjour !",
        "response": "Erreur Mistral HTTP 404",
        "context": {
          "type": "business_query",
          "confidence": 0.43355038166046145,
          "sources_count": 7,
          "response_time": 1.7725932598114014,
          "provider": "gemini",
          "prompt_type": "greeting",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "Bonjour !"
          }
        }
      },
      {
        "timestamp": "2025-06-02T21:00:05.269688",
        "query": "Quels sont les prix de TeamSquare ?",
        "response": "Erreur Mistral HTTP 404",
        "context": {
          "type": "business_query",
          "confidence": 0.6444833308458329,
          "sources_count": 7,
          "response_time": 0.5170385837554932,
          "provider": "mistral",
          "prompt_type": "pricing",
          "scope_analysis": {
            "scope": "business",
            "confidence": 0.7,
            "business_score": 0.7,
            "external_score": 0.0,
            "query": "Quels sont les prix de TeamSquare ?"
          }
        }
      },
      {
        "timestamp": "2025-06-02T21:00:05.289111",
        "query": "Quelle est la météo aujourd'hui ?",
        "response": "🤔 Cette question semble porter sur météo qui n'est pas lié à TeamSquare.\n\nCette question ne fait pas partie de mon domaine d'expertise TeamSquare, mais je peux faire appel à mon collègue spécialisé dans la recherche externe pour vous aider.\n\n🔍 **Voulez-vous que je lance une recherche externe pour répondre à votre question ?**\n\nRépondez simplement **\"oui\"** ou **\"non\"**.",
        "context": {
          "type": "external_search_offer",
          "scope_analysis": {
            "scope": "external",
            "confidence": 0.8,
            "business_score": 0.0,
            "external_score": 0.8,
            "query": "Quelle est la météo aujourd'hui ?"
          },
          "reason": "Cette question semble porter sur météo qui n'est pas lié à TeamSquare."
        }
      },
      {
        "timestamp": "2025-06-02T21:00:05.754874",
        "query": "Quelle est la météo aujourd'hui ?",
        "response": "🔍 **Recherche externe effectuée**\n\nErreur Mistral HTTP 404\n\n📊 **Sources consultées:** Recherche web simulée\n\n💡 Pour toute question sur TeamSquare, n'hésitez pas à me demander !",
        "context": {
          "type": "external_search",
          "sources": [
            "Recherche web simulée"
          ],
          "success": true
        }
      },
      {
        "timestamp": "2025-06-02T21:00:06.296412",
        "query": "Comment fonctionne l'API TeamSquare ?",
        "response": "Erreur Mistral HTTP 404",
        "context": {
          "type": "business_query",
          "confidence": 0.7086083233356476,
          "sources_count": 7,
          "response_time": 0.5331976413726807,
          "provider": "mistral",
          "prompt_type": "features",
          "scope_analysis": {
            "scope": "business",
            "confidence": 0.7999999999999999,
            "business_score": 0.7999999999999999,
            "external_score": 0.2,
            "query": "Comment fonctionne l'API TeamSquare ?"
          }
        }
      },
      {
        "timestamp": "2025-06-02T21:00:06.785633",
        "query": "Tu te souviens de notre conversation ?",
        "response": "Erreur Mistral HTTP 404",
        "context": {
          "type": "business_query",
          "confidence": 0.37660282850265503,
          "sources_count": 7,
          "response_time": 0.4642815589904785,
          "provider": "mistral",
          "prompt_type": "main",
          "scope_analysis": {
            "scope": "unknown",
            "confidence": 0.3,
            "business_score": 0.0,
            "external_score": 0.0,
            "query": "Tu te souviens de notre conversation ?"
          }
        }
      }
    ],
    "context": {
      "type": "business_query",
      "confidence": 0.37660282850265503,
      "sources_count": 7,
      "response_time": 0.4642815589904785,
      "provider": "mistral",
      "prompt_type": "main",
      "scope_analysis": {
        "scope": "unknown",
        "confidence": 0.3,
        "business_score": 0.0,
        "external_score": 0.0,
        "query": "Tu te souviens de notre conversation ?"
      },
      "reason": "Cette question semble porter sur météo qui n'est pas lié à TeamSquare.",
      "sources": [
        "Recherche web simulée"
      ],
      "success": true
    },
    "created_at": "2025-06-02T18:20:17.966593",
    "updated_at": "2025-06-02T21:00:06.785668"
  }
}